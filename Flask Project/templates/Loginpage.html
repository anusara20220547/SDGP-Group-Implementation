<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/64d58efce2.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="../static/NavigationCSS.css" />
    <link rel="stylesheet" href="../static/footer.css" />
    <link rel="stylesheet" href="../static/Login page/style.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400&display=swap">
    <script type="module" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.js"></script>
    <script src="http://translate.google.com/translate_a/element.js?cb=loadGoogleTranslate"></script>
    <title>Voice of Unity</title>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="logo">
          <img src="../static/images/logo.png" alt="Logo">
      </div>
      <div id="menu-icon">☰</div>
      <nav class="navbar">
          <a href="/">Home</a>
          <a href="/about">About</a>
          <a href="/help">Help</a>
          <a href="/loginp" class="login-btn">Log In</a>
      </nav>
  </header>
    <div class="container">
      <div class="forms-container">
        <div class="signin-signup">
          <form action="#" class="sign-in-form">
            <h2 class="title">Sign in</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" id="gmail" placeholder="Gmail" required>
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" id="password" placeholder="Password" required>
            </div>
            <a href="#" id="forgot-password-link">Forgot Password?</a>
            <button type="submit" class="btn">Login</button>
            <p class="social-text">Or Sign in with Google</p>
            <div class="social-media">
              <button type="submit" id="gs" class="social-icon">
                  <i class="fab fa-google"></i>
              </button>
          </div>
            
            
          </form>
          <form action="" class="sign-up-form">
            <h2 class="title">Sign up</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" id="name" placeholder="Username" required> 
            </div>
            <div class="input-field">
              <i class="fas fa-envelope"></i>
              <input type="text" id="gmail1" placeholder="Gmail" required>
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" id="password1" placeholder="Password" required>
            </div>
            <button type="submit" class="btn" value="Sign up">Sign Up</button>
            <p class="social-text">Or Sign in with Google</p>
            <div class="social-media">
              <button type="submit" id="ga" class="social-icon">
                  <i class="fab fa-google"></i>
              </button>
          </div>

          </form>
        </div>
      </div>

      <div class="panels-container">
        <div class="panel left-panel">
          <div class="content">
            <br><br>
            <h3>Want to register?
            </h3>
            <p>
              To become a part of our community, Please sign up using your personal information.
            </p>
            <button class="btn transparent" id="sign-up-btn">
              Sign up
            </button>
          </div>
          <img src="../static/images/log.svg" class="image" alt="" />
        </div>
        <div class="panel right-panel">
          <div class="content">
            <br><br><br>
            <h3>Already registered?</h3>
            <p>
              Already a member? Welcome back! Log in to access your account and be a part of our vibrant community.
            </p>
            <button class="btn transparent" id="sign-in-btn">
              Sign in
            </button>
          </div>
          <img src="../static/images/register.svg" class="image" alt="" />
        </div>
      </div>
    </div>

    <footer>
        
      <div class="row">
          <div class="col">
              <img src="../static/images/logo.png" class="footer_logo">
              <p class="footer_about">Join us in making a difference! Sign up for updates and stay connected.

              </p>
          </div>
          <div class="col">
              <h3>Contact Us <div class="bottom_line"><span></span></div></h3>
              <p class="footer_email">voiceofunityweb@gmail.com</p>
              <h4>+94 - 715442990</h4>
          </div>
          <div class="col">
              <h3>Links <div class="bottom_line"><span></span></div></h3>
              <ul>
                  <li><a href="/">HOME</a></li>
                  <li><a href="/loginp">LOGIN</a></li>
                  <li><a href="/help">SUPPORT</a></li>
              </ul>
          </div>
          <div class="col">
              
              
                  <div id="myid"></div>
              
              <div class="social_icons">
                  <ion-icon class="social_icon" name="logo-facebook"></ion-icon>
                  <ion-icon class="social_icon" name="logo-whatsapp"></ion-icon>
                  <ion-icon class="social_icon" name="logo-twitter"></ion-icon>
                  <ion-icon class="social_icon" name="logo-instagram"></ion-icon>
              </div>
          </div>
      </div>
      <hr>
      <p class="copyright">Voice of Unity Ⓒ 2024 - All Rights Reserved</p>
   </footer> 


   <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
   <script type="module">
  
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";
    
    const firebaseConfig = {
      apiKey: "AIzaSyCHo3GsutqlcVaSrCT3IgyzG6iRce4-egM",
      authDomain: "voc-sdgp.firebaseapp.com",
      databaseURL: "https://voc-sdgp-default-rtdb.firebaseio.com",
      projectId: "voc-sdgp",
      storageBucket: "voc-sdgp.appspot.com",
      messagingSenderId: "158804183426",
      appId: "1:158804183426:web:a814aabef72fd4dcaaa79b"
    };
  
  
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const provider = new GoogleAuthProvider()
  
    const signInButton = document.getElementById("ga");
    const signUpButton = document.getElementById("gs");
  
    const userSignIn = async () => {
    try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;

        // Save user information in local storage
        localStorage.setItem('userName', user.displayName);
        localStorage.setItem('userGmail', user.email);

        // Proceed to save user information in the database
        saveGoogleSignInDetails(user.displayName, user.email);
        window.location.href = "/recog";

    } catch (error) {
        console.error("Error with Google Sign-In:", error);
    }
};

const userSignUp = async () => {
    try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;

        // Save user information in local storage
        localStorage.setItem('userName', user.displayName);
        localStorage.setItem('userGmail', user.email);

        // Proceed to save user information in the database
        saveGoogleSignInDetails(user.displayName, user.email);
        window.location.href = "/index";

    } catch (error) {
        console.error("Error with Google Sign-In:", error);
    }
};


const saveGoogleSignInDetails = (name, gmail) => {
const contactFormDB = firebase.database().ref('alldata/authentication');

contactFormDB.orderByChild("gmail").equalTo(gmail).once("value", snapshot => {
    if (!snapshot.exists()) {
        const newAuthenticationRef = contactFormDB.push();

        // Save Google Sign-In user information in the database
        newAuthenticationRef.set({
            name: name,
            gmail: gmail,
            signcount: 0
        }).catch((error) => {
            console.error("Error uploading authentication data:", error);
        });
    }
});
};

    signInButton.addEventListener('click', userSignIn);
    signUpButton.addEventListener('click', userSignUp);

  </script>
  
  <script>
    // Google Translate function
    function loadGoogleTranslate() {
        new google.translate.TranslateElement({
        includedLanguages: 'si,en,ta', // Languages to include (Sinhala, English, Tamil)
    }, 'myid'); // 'myid' is the ID of the element where you want to place the translation widget
    }
</script>

 <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>

   <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-auth.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.1.1/firebase-firestore.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/7.14.1-0/firebase.js"></script>
   <script src="../static/Login page/mail.js"></script> 
   <script src="../static/Navbar.js"></script> 
  </body>
</html>